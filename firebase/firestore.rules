// Plantilla básica de reglas Firestore.
// Ajusta según tus necesidades de roles y acceso.
service cloud.firestore {
  match /databases/{database}/documents {
    // usuarios: cada usuario puede leer su propio perfil
    match /usuarios/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow create: if request.auth != null; // registro autenticado
      allow update: if request.auth != null && request.auth.uid == userId;
      allow delete: if false; // bloquear borrado por seguridad
    }

    // consentimientos: solo lectura pública desde cliente si es necesario
    match /consentimientos/{docId} {
      allow read: if true;
      allow create: if request.auth != null; // servidor/admin preferible
      allow update, delete: if false;
    }

    // reglas por defecto: denegar
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
